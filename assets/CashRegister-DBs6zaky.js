import{a as A}from"./AdminLayout-XEgXt3TH.js";import{_ as F,E,a as R}from"./jspdf.plugin.autotable-DhKcob0h.js";import{i as S,c as $,o as p,a as t,j as k,B as C,u as x,d as g,t as b,n as T,r as h,l as j,C as N,e as _,g as D,w as O,F as B}from"./index-BPSqfqUE.js";const z={class:"p-5 border-b border-gray-200 dark:border-gray-700"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},P={class:"md:col-span-2"},M={__name:"CashRegisterForm",props:{modelValue:Object},emits:["update:modelValue"],setup(v,{emit:r}){const o=v,c=r,s=o.modelValue;return S(s,d=>{c("update:modelValue",{...d})},{deep:!0}),(d,e)=>(p(),$("div",z,[e[10]||(e[10]=t("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4"},"Enter Counted Amounts",-1)),t("div",L,[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Cash",-1)),k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>x(s).cash=a),type:"number",step:"0.01",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white p-2"},null,512),[[C,x(s).cash,void 0,{number:!0}]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Credit Cards",-1)),k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>x(s).creditCards=a),type:"number",step:"0.01",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white p-2"},null,512),[[C,x(s).creditCards,void 0,{number:!0}]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Vouchers",-1)),k(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>x(s).vouchers=a),type:"number",step:"0.01",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white p-2"},null,512),[[C,x(s).vouchers,void 0,{number:!0}]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tips",-1)),k(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>x(s).tips=a),type:"number",step:"0.01",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white p-2"},null,512),[[C,x(s).tips,void 0,{number:!0}]])]),t("div",P,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Adjustments",-1)),k(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>x(s).adjustments=a),type:"number",step:"0.01",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white p-2"},null,512),[[C,x(s).adjustments,void 0,{number:!0}]])])])]))}},Y={class:"p-5 dark:border-gray-700"},q={class:"max-w-full overflow-x-auto custom-scrollbar"},I={class:"w-full border-collapse"},Z={class:"border-t p-3 text-left text-theme-sm text-gray-500 dark:text-gray-400"},G={class:"border-t p-3 text-left text-theme-sm text-gray-500 dark:text-gray-400"},H={class:"border-t p-3 text-left text-theme-sm text-gray-500 dark:text-gray-400"},J={class:"border-t p-3 text-left text-theme-sm text-gray-500 dark:text-gray-400"},K={class:"border-t p-3 text-left text-theme-sm text-gray-500 dark:text-gray-400"},Q={class:"border-t p-3 text-left text-theme-sm text-gray-500 dark:text-gray-400"},W={__name:"CashRegisterSummary",props:{counts:Object,expected:Object},setup(v){const r=v,o=g(()=>{var e,a,l,i;return{cash:(((e=r.counts)==null?void 0:e.cash)||0)-(((a=r.expected)==null?void 0:a.cash)||0),creditCards:(((l=r.counts)==null?void 0:l.creditCards)||0)-(((i=r.expected)==null?void 0:i.creditCards)||0)}}),c=g(()=>{const e=r.counts||{};return Object.values(e).reduce((l,i)=>l+Number(i||0),0)}),s=g(()=>{var a;return c.value-(((a=r.expected)==null?void 0:a.total)||0)}),d=e=>Number(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return(e,a)=>{var l,i,f,w,V;return p(),$("div",Y,[a[4]||(a[4]=t("h2",{class:"text-lg font-semibold text-gray-800 dark:text-white mb-4"},"Summary",-1)),t("div",q,[t("table",I,[a[3]||(a[3]=t("thead",null,[t("tr",null,[t("th",{class:"border-t p-3 font-medium text-left text-gray-500 text-theme-xs dark:text-gray-400 w-1/4"},"Category"),t("th",{class:"border-t p-3 font-medium text-left text-gray-500 text-theme-xs dark:text-gray-400 w-1/4"},"Expected"),t("th",{class:"border-t p-3 font-medium text-left text-gray-500 text-theme-xs dark:text-gray-400 w-1/4"},"Actual"),t("th",{class:"border-t p-3 font-medium text-left text-gray-500 text-theme-xs dark:text-gray-400 w-1/4"},"Variance")])],-1)),t("tbody",null,[t("tr",null,[a[0]||(a[0]=t("td",{class:"border-t p-3 text-left text-theme-sm text-gray-500 dark:text-gray-400"},"Cash",-1)),t("td",Z,"$"+b(d(((l=r.expected)==null?void 0:l.cash)||0)),1),t("td",G,"$"+b(d(((i=r.counts)==null?void 0:i.cash)||0)),1),t("td",{class:T(["border-t p-3 text-left text-theme-sm",{"text-red-500 dark:text-red-400":o.value.cash<0,"text-green-500 dark:text-green-400":o.value.cash>0}])}," $"+b(d(o.value.cash||0)),3)]),t("tr",null,[a[1]||(a[1]=t("td",{class:"border-t p-3 text-left text-theme-sm text-gray-500 dark:text-gray-400"},"Credit Cards",-1)),t("td",H,"$"+b(d(((f=r.expected)==null?void 0:f.creditCards)||0)),1),t("td",J,"$"+b(d(((w=r.counts)==null?void 0:w.creditCards)||0)),1),t("td",{class:T(["border-t p-3 text-left text-theme-sm",{"text-red-500 dark:text-red-400":o.value.creditCards<0,"text-green-500 dark:text-green-400":o.value.creditCards>0}])}," $"+b(d(o.value.creditCards||0)),3)]),t("tr",null,[a[2]||(a[2]=t("td",{class:"border-t p-3 text-left text-theme-sm text-gray-500 dark:text-gray-400"},"Total",-1)),t("td",K,"$"+b(d(((V=r.expected)==null?void 0:V.total)||0)),1),t("td",Q,"$"+b(d(c.value||0)),1),t("td",{class:T(["border-t p-3 text-left text-theme-sm",{"text-red-500 dark:text-red-400":(s.value||0)<0,"text-green-500 dark:text-green-400":(s.value||0)>0}])}," $"+b(d(s.value||0)),3)])])])])])}}},X={class:"p-5"},tt={__name:"CashRegisterNotes",props:{modelValue:String},emits:["update:modelValue"],setup(v,{emit:r}){const o=v,c=r,s=h(o.modelValue||"");return S(s,d=>{c("update:modelValue",d)}),S(()=>o.modelValue,d=>{d!==s.value&&(s.value=d||"")}),(d,e)=>(p(),$("div",X,[e[1]||(e[1]=t("h2",{class:"text-lg font-semibold text-gray-800 dark:text-white mb-4"},"Notes (Required for Variances)",-1)),k(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),class:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white",rows:"4",placeholder:"Enter notes explaining the variance..."},null,512),[[C,s.value]])]))}},et={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},at={class:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg w-full max-w-md"},rt={class:"text-gray-700 dark:text-gray-300 mb-4"},st={key:0,class:"text-gray-700 dark:text-gray-300 mb-4"},ot={key:1,class:"text-red-500 mb-4"},lt={class:"flex justify-end gap-4"},dt=["disabled"],nt={__name:"CashRegisterConfirmation",props:{counts:Object,expected:Object,notes:String,variance:Number,canSubmit:Boolean},emits:["confirm","cancel"],setup(v,{emit:r}){const o=v,c=r,s=g(()=>Object.values(o.counts||{}).reduce((a,l)=>a+Number(l||0),0)),d=g(()=>{var a;return s.value-(((a=o.expected)==null?void 0:a.total)||0)}),e=a=>Number(a).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return(a,l)=>{var i;return p(),$("div",et,[t("div",at,[l[4]||(l[4]=t("h2",{class:"text-lg font-semibold text-gray-800 dark:text-white mb-4"},"Confirm Close-Out",-1)),l[5]||(l[5]=t("p",{class:"text-gray-700 dark:text-gray-300 mb-4"}," Are you sure you want to submit the close-out? This action cannot be undone. ",-1)),t("p",rt,[N(" Total Expected: $"+b(e(((i=o.expected)==null?void 0:i.total)||0)),1),l[2]||(l[2]=t("br",null,null,-1)),N(" Total Actual: $"+b(e(s.value||0)),1),l[3]||(l[3]=t("br",null,null,-1)),N(" Variance: $"+b(e(d.value||0)),1)]),o.notes?(p(),$("p",st,"Notes: "+b(o.notes),1)):j("",!0),!o.canSubmit&&d.value!==0?(p(),$("p",ot," Please provide notes to explain the variance before submitting. ")):j("",!0),t("div",lt,[t("button",{onClick:l[0]||(l[0]=f=>c("cancel")),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition-colors"}," Cancel "),t("button",{onClick:l[1]||(l[1]=f=>c("confirm")),disabled:!o.canSubmit,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400"}," Confirm ",8,dt)])])])}}},ut={class:"space-y-5 sm:space-y-6"},it={class:"p-5 text-right"},ct=["disabled"],gt={__name:"CashRegister",setup(v){const r=h({cash:0,creditCards:0,vouchers:0,tips:0,adjustments:0}),o=h(""),c=h(!1),s=h(!1),d=h(!1),e=h({cash:21539.32,creditCards:46769.65,total:68299.97}),a=g(()=>Object.values(r.value).reduce((m,y)=>m+Number(y||0),0)),l=g(()=>{var m;return a.value-(((m=e.value)==null?void 0:m.total)||0)}),i=g(()=>Math.abs(l.value)>.01),f=g(()=>!i.value||i.value&&o.value.trim().length>0);S(r,()=>{c.value=i.value},{deep:!0});const w=()=>{s.value=!0},V=async()=>{d.value=!0;try{await new Promise(n=>setTimeout(n,1e3)),U(),s.value=!1,o.value="",c.value=!1,r.value={cash:0,creditCards:0,vouchers:0,tips:0,adjustments:0}}catch(n){console.error("Error submitting close-out:",n)}finally{d.value=!1}},u=n=>Number(n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),U=()=>{const n=new E,m=new Date().toLocaleString("en-US",{timeZone:"America/Los_Angeles",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").replace(/(\d+)\/(\d+)\/(\d+)/,"$3-$2-$1");n.setFontSize(16),n.text(`Cash Register Close-Out - ${m} PDT`,10,10);const y=[["Category","Expected","Actual","Variance"],["Cash",`$${u(e.value.cash)}`,`$${u(r.value.cash)}`,`$${u(r.value.cash-e.value.cash)}`],["Credit Cards",`$${u(e.value.creditCards)}`,`$${u(r.value.creditCards)}`,`$${u(r.value.creditCards-e.value.creditCards)}`],["Vouchers","$0.00",`$${u(r.value.vouchers)}`,`$${u(r.value.vouchers)}`],["Tips","$0.00",`$${u(r.value.tips)}`,`$${u(r.value.tips)}`],["Adjustments","$0.00",`$${u(r.value.adjustments)}`,`$${u(r.value.adjustments)}`],["Total",`$${u(e.value.total)}`,`$${u(a.value)}`,`$${u(l.value)}`]];R(n,{head:[["Category","Expected","Actual","Variance"]],body:y.slice(1),startY:20,styles:{fontSize:8},headStyles:{fillColor:[0,102,204]},margin:{top:10}}),o.value&&(n.setFontSize(10),n.text(`Notes: ${o.value}`,10,n.lastAutoTable.finalY+10)),n.save(`cash_register_closeout_${new Date().toISOString().split("T")[0]}.pdf`)};return(n,m)=>(p(),$(B,null,[_(A,null,{default:O(()=>[t("div",ut,[_(F,null,{default:O(()=>[_(M,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=y=>r.value=y)},null,8,["modelValue"]),_(W,{counts:r.value,expected:e.value},null,8,["counts","expected"]),c.value?(p(),D(tt,{key:0,modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=y=>o.value=y)},null,8,["modelValue"])):j("",!0),t("div",it,[t("button",{onClick:w,disabled:d.value||!f.value,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400"}," Submit Close-Out ",8,ct)])]),_:1})])]),_:1}),s.value?(p(),D(nt,{key:0,counts:r.value,expected:e.value,notes:o.value,variance:l.value,"can-submit":f.value,onConfirm:V,onCancel:m[2]||(m[2]=y=>s.value=!1)},null,8,["counts","expected","notes","variance","can-submit"])):j("",!0)],64))}};export{gt as default};
