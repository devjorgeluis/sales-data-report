import{a as O}from"./AdminLayout-0EDKWrO6.js";import{_ as j}from"./ComponentCard.vue_vue_type_script_setup_true_lang-D-UXI4hD.js";import{E as L,a as A,u as v,w as N}from"./xlsx-BDHh_pxI.js";import{f as G}from"./flatpickr.min-B-f_2Bm6.js";import{r as T,m as U,i as M,c as m,o as f,a as e,F as w,k,b as $,t as o,n as q,d as V,g as W,w as S,e as z,u as B}from"./index-z-SNgvFC.js";const R={class:"p-3 sm:p-5 border-b border-gray-200 dark:border-gray-700"},Y={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4"},H={class:"flex flex-col gap-2 w-[300px]"},J={__name:"PlFilters",props:{filters:{type:Object,required:!0},filteredData:{type:Array,required:!0},totalData:{type:Object,required:!0}},emits:["update:filters","export-to-pdf","export-to-excel"],setup(p,{emit:s}){const i=p,t=s,n=T({...i.filters}),h=T(null);U(()=>{G(h.value,{mode:"range",dateFormat:"m/d/Y",defaultDate:[n.value.startDate,n.value.endDate],onChange:r=>{r.length===2&&(n.value.startDate=r[0].toISOString().split("T")[0],n.value.endDate=r[1].toISOString().split("T")[0],t("update:filters",{...n.value}))}})}),M(n,r=>{t("update:filters",{...r})},{deep:!0});const a=r=>r!==0?"$"+Number(r).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"-",l=r=>r.replace(/^./,d=>d.toUpperCase()),c=()=>{const r=new L,d=[];i.filteredData&&i.filteredData.length?i.filteredData.forEach(y=>{var x,g,_;d.push([l(y.name),a(((x=y.total)==null?void 0:x.price)??y.price??0),(((g=y.total)==null?void 0:g.percent)??y.percent??0)+"%"]),(_=y.list)!=null&&_.length&&y.list.forEach(b=>{var F,P,C;d.push([`    ${l(b.name)}`,a(((F=b.total)==null?void 0:F.price)??b.price??0),(((P=b.total)==null?void 0:P.percent)??b.percent??0)+"%"]),(C=b.list)!=null&&C.length&&b.list.forEach(D=>{d.push([`        ${l(D.name)}`,a(D.price??0),(D.percent??0)+"%"])})})}):d.push(["No data","-","-"]),A(r,{body:d,startY:10,theme:"striped",styles:{halign:"right",cellPadding:2,fillColor:[0,0,0],textColor:[255,255,255]},columnStyles:{0:{halign:"left",cellWidth:100},1:{halign:"right",cellWidth:50},2:{halign:"right",cellWidth:30}},alternateRowStyles:{fillColor:[254,249,194],textColor:[0,0,0]}}),r.save("profit_loss_report.pdf"),t("export-to-pdf")},u=()=>{const r=[];i.filteredData.forEach(x=>{r.push([l(x.name),a(x.total?x.total.price:x.price),(x.total?x.total.percent:x.percent)+"%"]),x.list&&x.list.forEach(g=>{r.push(["  "+l(g.name),a(g.total?g.total.price:g.price),(g.total?g.total.percent:g.percent)+"%"]),g.list&&g.list.forEach(_=>{r.push(["    "+l(_.name),a(_.price),_.percent+"%"])})})}),r.push(["Ganancia Operativa Bruta",a(i.totalData.profit.price),i.totalData.profit.percent+"%"]),r.push(["Impuestos SAT",a(i.totalData.tax.price),i.totalData.tax.percent+"%"]),r.push(["Préstamos Bancarios",a(i.totalData.bank_loans.price),i.totalData.bank_loans.percent+"%"]),r.push(["Intereses",a(i.totalData.interest.price),i.totalData.interest.percent+"%"]),r.push(["Ganancia Bruta antes de Impuestos",a(i.totalData.profit_without_tax.price),i.totalData.profit_without_tax.percent+"%"]),r.push(["TOTAL GASTOS",a(i.totalData.expense.price)]);const d=v.aoa_to_sheet(r),y=v.book_new();v.book_append_sheet(y,d,"ProfitLoss"),N(y,"profit_loss_report.xlsx"),t("export-to-excel")};return(r,d)=>(f(),m("div",R,[e("div",Y,[e("div",H,[d[0]||(d[0]=e("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white"},"Date Range",-1)),e("input",{ref_key:"datePicker",ref:h,class:"border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200",placeholder:"Select date range"},null,512)]),e("div",{class:"flex flex-wrap gap-3"},[e("button",{onClick:c,class:"px-4 py-2 bg-yellow-400 text-sm text-black rounded-lg hover:bg-yellow-500 transition-colors"}," Export to PDF "),e("button",{onClick:u,class:"px-4 py-2 bg-yellow-400 text-sm text-black rounded-lg hover:bg-yellow-500 transition-colors"}," Export to Excel ")])])]))}},K={class:"p-3 sm:p-5 max-w-full overflow-x-auto custom-scrollbar"},Q={class:"w-full"},X={class:"bg-white dark:bg-gray-700 dark:text-gray-400"},Z={class:"font-bold capitalize",colspan:"4"},I=["colspan"],ee={class:"px-2 font-bold text-right"},te={class:"px-2 font-bold text-right"},ae={class:"px-2 pl-12 capitalize"},re={class:"px-2 text-right font-bold"},oe={class:"px-2 text-right font-bold"},ne={key:1,class:"bg-gray-500"},le={class:"px-2 font-regular text-center text-yellow-300"},ie={class:"px-2 text-right font-bold text-yellow-300"},se={class:"px-2 text-right font-bold text-yellow-300"},ce={class:"font-bold bg-black dark:bg-gray-700 text-yellow-300 dark:text-yellow-500 capitalize"},pe={class:"px-2 py-1 capitalize"},de={class:"px-2 py-1 text-right"},xe={class:"px-2 py-1 text-right"},fe={key:1,class:"font-bold bg-black dark:bg-gray-700 text-yellow-300 dark:text-yellow-500 capitalize"},me={class:"px-2 py-1 text-right"},ye={class:"px-2 py-1 text-right"},ge={class:"bg-black dark:bg-gray-700 mt-3"},ue={class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 text-right"},he={class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 text-right"},be={class:"bg-yellow-100 dark:bg-yellow-200"},we={class:"px-2 text-right font-bold"},_e={class:"px-2 text-right font-bold"},ke={class:"bg-yellow-100 dark:bg-yellow-200"},De={class:"px-2 text-right font-bold"},ve={class:"px-2 text-right font-bold"},$e={class:"bg-yellow-100 dark:bg-yellow-200"},ze={class:"px-2 text-right font-bold"},Ee={class:"px-2 text-right font-bold"},Te={class:"bg-black dark:bg-gray-700"},Fe={class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 text-right"},Pe={class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 text-right"},Ce={class:"bg-black dark:bg-gray-700"},qe={class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 text-right"},Se={key:1},Be={__name:"PlTable",props:{filteredData:Array,totalData:Object},setup(p){const s=i=>i!==0?Number(i).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"-";return(i,t)=>(f(),m("div",K,[e("table",Q,[e("tbody",null,[p.filteredData&&p.filteredData.length?(f(),m(w,{key:0},[(f(!0),m(w,null,$(p.filteredData,(n,h)=>(f(),m(w,{key:h},[e("tr",X,[e("td",Z,o(n.name)+": ",1)]),n.list&&n.list.length?(f(!0),m(w,{key:0},$(n.list,(a,l)=>(f(),m(w,{key:`${h}-${l}`},[e("tr",{class:q(a.list&&a.list.length>0?"bg-white dark:bg-gray-700 dark:text-gray-400":"bg-yellow-100 dark:bg-yellow-200")},[e("td",{class:q(["px-2 capitalize",{"font-bold":a.list&&a.list.length>0}]),colspan:a.list&&a.list.length===0?"4":"1"},o(a.name)+" "+o(a.list&&a.list.length>0?"-":""),11,I),t[0]||(t[0]=e("td",{class:"px-2 font-bold text-center"}," $ ",-1)),e("td",ee,o(a.total?s(a.total.price):s(a.price)),1),e("td",te,o(a.total?a.total.percent:a.percent)+"% ",1)],2),a.list&&a.list.length?(f(!0),m(w,{key:0},$(a.list,(c,u)=>(f(),m("tr",{class:"bg-yellow-100 dark:bg-yellow-200",key:`${h}-${l}-${u}`},[e("td",ae,o(c.name),1),t[1]||(t[1]=e("td",{class:"px-2 text-center font-bold"}," $ ",-1)),e("td",re,o(s(c.price)),1),e("td",oe,o(c.percent)+"% ",1)]))),128)):k("",!0),a.total?(f(),m("tr",ne,[e("td",le," Total "+o(a.name),1),t[2]||(t[2]=e("td",{class:"px-2 font-bold text-yellow-300 text-center"}," $ ",-1)),e("td",ie,o(s(a.total.price)),1),e("td",se,o(a.total.percent)+"% ",1)])):k("",!0)],64))),128)):k("",!0),e("tr",ce,[e("td",pe," total "+o(n.name),1),t[3]||(t[3]=e("td",{class:"px-2 py-1 text-center"}," $ ",-1)),e("td",de,o(n.total?s(n.total.price):s(n.price)),1),e("td",xe,o(n.total?n.total.percent:n.percent)+"% ",1)]),n.production_cost?(f(),m("tr",fe,[t[4]||(t[4]=e("td",{class:"px-2 py-1"}," Costo de Produccion ",-1)),t[5]||(t[5]=e("td",{class:"px-2 py-1 text-center"}," $ ",-1)),e("td",me,o(n.production_cost?s(n.production_cost.price):"-"),1),e("td",ye,o(n.production_cost?n.production_cost.percent:0)+"% ",1)])):k("",!0),t[6]||(t[6]=e("tr",{class:"h-[20px]"},null,-1))],64))),128)),p.totalData?(f(),m(w,{key:0},[e("tr",ge,[t[7]||(t[7]=e("td",{class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 capitalize"},"Ganancia Operativa Bruta",-1)),t[8]||(t[8]=e("td",{class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 text-center"},"$",-1)),e("td",ue,o(s(p.totalData.profit.price)),1),e("td",he,o(p.totalData.profit.percent)+"% ",1)]),e("tr",be,[t[9]||(t[9]=e("td",{class:"px-2 capitalize"},"Impuestos SAT",-1)),t[10]||(t[10]=e("td",{class:"px-2 capitalize font-bold text-center"},"$",-1)),e("td",we,o(s(p.totalData.tax.price)),1),e("td",_e,o(p.totalData.tax.percent)+"%",1)]),e("tr",ke,[t[11]||(t[11]=e("td",{class:"px-2 capitalize"},"Préstamos Bancarios",-1)),t[12]||(t[12]=e("td",{class:"px-2 capitalize font-bold text-center"},"$",-1)),e("td",De,o(s(p.totalData.bank_loans.price)),1),e("td",ve,o(p.totalData.bank_loans.percent)+"%",1)]),e("tr",$e,[t[13]||(t[13]=e("td",{class:"px-2 capitalize"},"Intereses",-1)),t[14]||(t[14]=e("td",{class:"px-2 capitalize font-bold text-center"},"$",-1)),e("td",ze,o(s(p.totalData.interest.price)),1),e("td",Ee,o(p.totalData.interest.percent)+"%",1)]),e("tr",Te,[t[15]||(t[15]=e("td",{class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 capitalize"},"Ganancia Bruta antes de Impuestos",-1)),t[16]||(t[16]=e("td",{class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 text-center"},"$",-1)),e("td",Fe,o(s(p.totalData.profit_without_tax.price)),1),e("td",Pe,o(p.totalData.profit_without_tax.percent)+"% ",1)]),e("tr",Ce,[t[17]||(t[17]=e("td",{class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 capitalize"},"TOTAL GASTOS",-1)),t[18]||(t[18]=e("td",{class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 text-center"},"$",-1)),e("td",qe,o(s(p.totalData.expense.price)),1),t[19]||(t[19]=e("td",{class:"px-2 py-1 font-bold text-yellow-300 dark:text-yellow-500 text-right"},null,-1))])],64)):k("",!0)],64)):(f(),m("tr",Se,t[20]||(t[20]=[e("td",{colspan:"4",class:"px-2 text-center"},"No data available",-1)])))])])]))}},Oe=[{name:"ventas",date:"2025-06-01",total:{price:267482.56,percent:100},production_cost:{price:6510.7,percent:50},list:[{name:"alimento",date:"2025-06-02",price:191631.24,percent:71.6},{name:"refrescos",date:"2025-06-03",price:0,percent:0},{name:"Otra Mercancia",date:"2025-06-04",price:0,percent:0},{name:"bar",date:"2025-06-05",total:{price:75531.32,percent:28.4},list:[{name:"licor",date:"2025-06-06",price:45171.15,percent:16.9},{name:"cerveza - barril",date:"2025-06-07",price:0,percent:0},{name:"cerveza - embotellada",date:"2025-06-08",price:26077.76,percent:9.9},{name:"vino",date:"2025-06-09",price:4072.41,percent:1.5}]},{name:"otros ingresos operativos",date:"2025-06-10",total:{price:0,percent:0},list:[{name:"rentas salones de eventos",date:"2025-06-11",price:0,percent:0},{name:"renta de equipo banquetes",date:"2025-06-12",price:0,percent:0},{name:"ingresos por servicios",date:"2025-06-13",price:0,percent:0},{name:"ingresos por otros servicios",date:"2025-06-14",price:0,percent:0}]}]},{name:"costo de venta",date:"2025-06-15",total:{price:100933.79,percent:37.7},production_cost:{price:5310.47,percent:40},list:[{name:"alimento",date:"2025-06-16",price:66791.96,percent:34.9},{name:"bar",date:"2025-06-17",price:29268.52,percent:38.6},{name:"desechables",date:"2025-06-18",price:4873.31,percent:1.8}]},{name:"mano de obra",date:"2025-06-19",total:{price:112965.91,percent:42.2},production_cost:{price:7315.47,percent:65},list:[{name:"admin",date:"2025-06-20",price:7e3,percent:4.3},{name:"empleados",date:"2025-06-19",total:{price:.01,percent:0},list:[{name:"cocina",date:"2025-06-21",price:0,percent:0},{name:"piso",date:"2025-06-22",price:0,percent:0},{name:"banquetes",date:"2025-06-23",price:112965.9,percent:42.2},{name:"empleados",date:"2025-06-24",price:34596.9,percent:21.2}]},{name:"prestaiones empleados",date:"2025-06-24",total:{price:.01,percent:0},list:[{name:"impuestos prestaciones",date:"2025-06-25",price:.01,percent:0},{name:"seguro social I.M.S.S.",date:"2025-06-26",price:0,percent:0},{name:"uber/taxi empleados",date:"2025-06-27",price:0,percent:0},{name:"otras prestaciones",date:"2025-06-28",price:0,percent:0}]}]},{name:"gastos fijos o variables",date:"2025-06-29",total:{price:127072.1,percent:47.5},production_cost:{price:213899.7,percent:80},list:[{name:"gastos de automovil o camion",date:"2025-06-30",price:0,percent:0},{name:"banquetes y catering",date:"2025-07-01",price:0,percent:0},{name:"utensilios de bar y suminstros",date:"2025-07-02",price:746,percent:.3},{name:"suministros de limpieza",date:"2025-07-03",price:2500.98,percent:.9},{name:"equipos/otros alquileres",date:"2025-07-04",price:0,percent:0},{name:"flores y decoraciones",date:"2025-07-05",price:3626.59,percent:1.4},{name:"cargos por flete y combustible",date:"2025-07-06",price:0,percent:0},{name:"cristaleria",date:"2025-07-07",price:0,percent:0},{name:"utensilios de cocina",date:"2025-07-08",price:5198.53,percent:1.9},{name:"lavanderia y tinteria",date:"2025-07-09",price:0,percent:0},{name:"alquiler de ropa y manteleria",date:"2025-07-10",price:0,percent:0},{name:"menus y listas de bebidas",date:"2025-07-11",price:0,percent:0},{name:"miscelaneas/varios",date:"2025-07-12",price:0,percent:0},{name:"papel y empaque",date:"2025-07-13",price:0,percent:0},{name:"valet parking",date:"2025-07-14",price:0,percent:0},{name:"control de plagas",date:"2025-07-15",price:0,percent:0},{name:"vajilla y articulos de servicio",date:"2025-07-16",price:0,percent:0},{name:"uniformes",date:"2025-07-17",price:0,percent:0},{name:"gastos directos operativos",date:"2025-07-18",total:{price:12707.1,percent:4.8}},{name:"musica y entretenimiento",date:"2025-07-19",total:{price:810,percent:.3},list:[{name:"bandas y musicos",date:"2025-07-20",price:0,percent:0},{name:"tarifas de licencias de musica",date:"2025-07-21",price:0,percent:0},{name:"servicio de transmision de television",date:"2025-07-22",price:810,percent:.3}]},{name:"mercadotecnia",date:"2025-07-23",total:{price:806.4,percent:.3},list:[{name:"publicidad de respuesta directa",date:"2025-07-24",price:806.4,percent:.3},{name:"relaciones publicas y publicidad",date:"2025-07-25",price:0,percent:0},{name:"encuestas de mercado",date:"2025-07-26",price:0,percent:0},{name:"otro",date:"2025-07-27",price:0,percent:0}]},{name:"servicios",date:"2025-07-28",total:{price:56157.45,percent:21},list:[{name:"electricidad",date:"2025-07-29",price:51409,percent:19.2},{name:"gas",date:"2025-07-30",price:0,percent:0},{name:"carbon",date:"2025-07-31",price:0,percent:0},{name:"otros combustibles-hielo",date:"2025-08-01",price:478.5,percent:.2},{name:"basura",date:"2025-08-02",price:4269.95,percent:1.6},{name:"agua y alcantarillado",date:"2025-08-03",price:0,percent:0}]},{name:"gastos generales & admin",date:"2025-08-04",total:{price:16363.63,percent:6.1},list:[{name:"cargos bancarios",date:"2025-08-05",price:10524.93,percent:3.9},{name:"efectivo (positivo/negativo) caja chica",date:"2025-08-06",price:0,percent:0},{name:"reclamaciones y danos pagados",date:"2025-08-07",price:0,percent:0},{name:"servicios de consultoria y coaching",date:"2025-08-08",price:0,percent:0},{name:"tarifas de tarjetas de credito",date:"2025-08-09",price:0,percent:0},{name:"honorarios de directores o funcionarios",date:"2025-08-10",price:0,percent:0},{name:"tovenmx",date:"2025-08-11",price:0,percent:0},{name:"seguros-responsabilidad civil y general",date:"2025-08-12",price:0,percent:0},{name:"licencias y permisos",date:"2025-08-13",price:2674.14,percent:1},{name:"miscelaneas",date:"2025-08-14",price:0,percent:0},{name:"articulos de oficina",date:"2025-08-15",price:3164.56,percent:1.2},{name:"eventos especiales",date:"2025-08-16",price:0,percent:0},{name:"servicios profesionales",date:"2025-08-17",price:0,percent:0},{name:"servicios de seguridad y deposito",date:"2025-08-18",price:0,percent:0},{name:"impuestos comerciales estatales",date:"2025-08-19",price:0,percent:0},{name:"telefono y comunicaciones",date:"2025-08-20",price:0,percent:0},{name:"programas y materiales de capacitacion",date:"2025-08-21",price:0,percent:0}]},{name:"reparaciones & mantenimiento",date:"2025-08-22",total:{price:11730.67,percent:4.4},list:[{name:"servicio de trampa de grasa",date:"2025-08-23",price:0,percent:0},{name:"equipos y mobiliario",date:"2025-08-24",price:11730.67,percent:4.4},{name:"terrenos y estacionamiento",date:"2025-08-25",price:0,percent:0}]}],ganancia_operativa:{price:-44357.39,percent:-16.6}},{name:"gastos fijos",date:"2025-08-26",total:{price:44357.39,percent:16.6},profit:{price:19983.4,percent:12.3},list:[{name:"costos de ocupación",date:"2025-08-27",total:{price:23354.4,percent:8.7},list:[{name:"renta",date:"2025-08-28",price:0,percent:0},{name:"mantenimiento de áreas comunes",date:"2025-08-29",price:2768.4,percent:1},{name:"seguro de edificio y contenido",date:"2025-08-30",price:0,percent:0},{name:"otros impuestos estatales",date:"2025-08-31",price:20586,percent:7.7},{name:"predial",date:"2025-09-01",price:0,percent:0},{name:"otros impuestos",date:"2025-09-02",price:0,percent:0}]},{name:"arriendamientos de equipos",date:"2025-09-03",price:0,percent:0},{name:"depreciación y amortización",date:"2025-09-04",price:0,percent:0}]}],je={profit:{price:-11816.13,percent:7.3},tax:{price:0,percent:0},bank_loans:{price:0,percent:0},interest:{price:0,percent:0},profit_without_tax:{price:-11816.13,percent:7.3},expense:{price:73068.28,percent:7.3}},E={list:Oe,total:je},Le={class:"space-y-5 sm:space-y-6"},Ve={__name:"ProfitLoss",setup(p){const s=T({startDate:"",endDate:""}),i=V(()=>(a=>!s.value.startDate||!s.value.endDate?a:a.map(l=>l.list?{...l,list:l.list.map(c=>{var u;return{name:c.name,price:c.price||(c.total?c.total.price:0),percent:c.percent||(c.total?c.total.percent:0),total:c.total,list:(u=c.list)==null?void 0:u.filter(r=>{let d=new Date(r.date||"2025-06-01");const y=new Date(s.value.startDate),x=new Date(s.value.endDate);return d>=y&&d<=x}).map(r=>({name:r.name,price:r.price,percent:r.percent,date:r.date}))}}).filter(c=>{var u;return((u=c.list)==null?void 0:u.length)>0||!c.list})}:{name:l.name,price:l.total?l.total.price:0,percent:l.total?l.total.percent:0,total:l.total,date:l.date}).filter(l=>{var c;return((c=l.list)==null?void 0:c.length)>0||!l.list}))(E.list||[])),t=()=>console.log("Exporting to PDF..."),n=()=>console.log("Exporting to Excel...");return(h,a)=>(f(),W(O,null,{default:S(()=>[e("div",Le,[z(j,null,{default:S(()=>[z(J,{filters:s.value,"filtered-data":i.value,"total-data":B(E).total,"onUpdate:filters":a[0]||(a[0]=l=>s.value=l),onExportToPdf:t,onExportToExcel:n},null,8,["filters","filtered-data","total-data"]),z(Be,{"filtered-data":i.value,"total-data":B(E).total},null,8,["filtered-data","total-data"])]),_:1})])]),_:1}))}};export{Ve as default};
